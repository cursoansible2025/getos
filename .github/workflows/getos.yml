--
- name: Validar conexión y obtener datos mínimos del sistema
  hosts: linux_servers
  become: yes
  gather_facts: no   # Evita recopilar todos los facts automáticamente
 
  tasks:
    - name: Comprobar conectividad con los servidores Linux
      ansible.builtin.ping:
 
    - name: Recoger solo los facts mínimos necesarios (SO, versión e IP)
      ansible.builtin.setup:
        gather_subset:
          - min        # facts básicos (incluye distribución y versión)
          - network    # datos de red para obtener la IP por defecto
 
    - name: Mostrar información mínima del sistema
      ansible.builtin.debug:
        msg: "Sistema: {{ ansible_distribution }} {{ ansible_distribution_version }}, IP: {{ ansible_default_ipv4.address }}"
 
